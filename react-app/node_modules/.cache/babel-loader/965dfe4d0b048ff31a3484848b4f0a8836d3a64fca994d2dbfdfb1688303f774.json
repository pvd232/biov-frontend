{"ast":null,"code":"import getBaseURL from \"./getBaseURL\";\nclass APIC {\n  constructor() {\n    this.env = void 0;\n    this.baseUrl = void 0;\n    this.frontEndBaseUrl = void 0;\n    this.mode = void 0;\n    this.fetchQuestionnaires = async () => {\n      const request = new Request(`${this.baseUrl}/questionnaire_junction`, {\n        method: \"GET\",\n        mode: this.mode\n      });\n      const response = await fetch(request);\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch questionnaires\");\n      }\n      return response;\n    };\n    this.postQuestionResponse = async questionResponse => {\n      const request = new Request(`${this.baseUrl}/question_response`, {\n        method: \"POST\",\n        mode: this.mode,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(questionResponse)\n      });\n      const response = await fetch(request);\n      if (!response.ok) {\n        throw new Error(\"Failed to post question response\");\n      }\n      return true;\n    };\n    this.authenticateUser = async user => {\n      const request = new Request(`${this.baseUrl}/login`, {\n        method: \"POST\",\n        mode: this.mode,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      });\n      const response = await fetch(request);\n      if (!response.ok) {\n        return null;\n      }\n      return response;\n    };\n    // Host name will be localhost when running async tests in jest\n    if (window.location.host === \"localhost:3000\" || window.location.host === \"localhost\") {\n      this.env = \"debug\";\n      this.baseUrl = getBaseURL(\"api\");\n      this.frontEndBaseUrl = getBaseURL(\"frontend\");\n      this.mode = \"cors\";\n    } else {\n      this.env = \"production\";\n      this.baseUrl = getBaseURL(\"api\");\n      this.frontEndBaseUrl = getBaseURL(\"frontend\");\n      this.mode = \"same-origin\";\n    }\n  }\n}\nexport const APIClient = new APIC();","map":{"version":3,"names":["getBaseURL","APIC","constructor","env","baseUrl","frontEndBaseUrl","mode","fetchQuestionnaires","request","Request","method","response","fetch","ok","Error","postQuestionResponse","questionResponse","headers","body","JSON","stringify","authenticateUser","user","window","location","host","APIClient"],"sources":["/Users/machina/Developer/biov-frontend/src/helpers/APIC.ts"],"sourcesContent":["import { QuestionResponse } from \"../types/domains/QuestionResponse\";\nimport { User } from \"../types/domains/User\";\nimport getBaseURL from \"./getBaseURL\";\nclass APIC {\n  env: string;\n  baseUrl: string;\n  frontEndBaseUrl: string;\n  mode: RequestMode;\n\n  constructor() {\n    // Host name will be localhost when running async tests in jest\n    if (\n      window.location.host === \"localhost:3000\" ||\n      window.location.host === \"localhost\"\n    ) {\n      this.env = \"debug\";\n      this.baseUrl = getBaseURL(\"api\");\n      this.frontEndBaseUrl = getBaseURL(\"frontend\");\n      this.mode = \"cors\";\n    } else {\n      this.env = \"production\";\n      this.baseUrl = getBaseURL(\"api\");\n      this.frontEndBaseUrl = getBaseURL(\"frontend\");\n      this.mode = \"same-origin\";\n    }\n  }\n  fetchQuestionnaires = async () => {\n    const request = new Request(`${this.baseUrl}/questionnaire_junction`, {\n      method: \"GET\",\n      mode: this.mode,\n    });\n    const response = await fetch(request);\n    if (!response.ok) {\n      throw new Error(\"Failed to fetch questionnaires\");\n    }\n    return response;\n  };\n  postQuestionResponse = async (questionResponse: QuestionResponse[]) => {\n    const request = new Request(`${this.baseUrl}/question_response`, {\n      method: \"POST\",\n      mode: this.mode,\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(questionResponse),\n    });\n    const response = await fetch(request);\n    if (!response.ok) {\n      throw new Error(\"Failed to post question response\");\n    }\n    return true;\n  };\n  authenticateUser = async (user: User) => {\n    const request = new Request(`${this.baseUrl}/login`, {\n      method: \"POST\",\n      mode: this.mode,\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(user),\n    });\n    const response = await fetch(request);\n    if (!response.ok) {\n      return null;\n    }\n    return response;\n  };\n}\nexport const APIClient = new APIC();\n"],"mappings":"AAEA,OAAOA,UAAU,MAAM,cAAc;AACrC,MAAMC,IAAI,CAAC;EAMTC,WAAWA,CAAA,EAAG;IAAA,KALdC,GAAG;IAAA,KACHC,OAAO;IAAA,KACPC,eAAe;IAAA,KACfC,IAAI;IAAA,KAmBJC,mBAAmB,GAAG,YAAY;MAChC,MAAMC,OAAO,GAAG,IAAIC,OAAO,CAAC,GAAG,IAAI,CAACL,OAAO,yBAAyB,EAAE;QACpEM,MAAM,EAAE,KAAK;QACbJ,IAAI,EAAE,IAAI,CAACA;MACb,CAAC,CAAC;MACF,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAACJ,OAAO,CAAC;MACrC,IAAI,CAACG,QAAQ,CAACE,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,gCAAgC,CAAC;MACnD;MACA,OAAOH,QAAQ;IACjB,CAAC;IAAA,KACDI,oBAAoB,GAAG,MAAOC,gBAAoC,IAAK;MACrE,MAAMR,OAAO,GAAG,IAAIC,OAAO,CAAC,GAAG,IAAI,CAACL,OAAO,oBAAoB,EAAE;QAC/DM,MAAM,EAAE,MAAM;QACdJ,IAAI,EAAE,IAAI,CAACA,IAAI;QACfW,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,gBAAgB;MACvC,CAAC,CAAC;MACF,MAAML,QAAQ,GAAG,MAAMC,KAAK,CAACJ,OAAO,CAAC;MACrC,IAAI,CAACG,QAAQ,CAACE,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,kCAAkC,CAAC;MACrD;MACA,OAAO,IAAI;IACb,CAAC;IAAA,KACDO,gBAAgB,GAAG,MAAOC,IAAU,IAAK;MACvC,MAAMd,OAAO,GAAG,IAAIC,OAAO,CAAC,GAAG,IAAI,CAACL,OAAO,QAAQ,EAAE;QACnDM,MAAM,EAAE,MAAM;QACdJ,IAAI,EAAE,IAAI,CAACA,IAAI;QACfW,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACE,IAAI;MAC3B,CAAC,CAAC;MACF,MAAMX,QAAQ,GAAG,MAAMC,KAAK,CAACJ,OAAO,CAAC;MACrC,IAAI,CAACG,QAAQ,CAACE,EAAE,EAAE;QAChB,OAAO,IAAI;MACb;MACA,OAAOF,QAAQ;IACjB,CAAC;IAxDC;IACA,IACEY,MAAM,CAACC,QAAQ,CAACC,IAAI,KAAK,gBAAgB,IACzCF,MAAM,CAACC,QAAQ,CAACC,IAAI,KAAK,WAAW,EACpC;MACA,IAAI,CAACtB,GAAG,GAAG,OAAO;MAClB,IAAI,CAACC,OAAO,GAAGJ,UAAU,CAAC,KAAK,CAAC;MAChC,IAAI,CAACK,eAAe,GAAGL,UAAU,CAAC,UAAU,CAAC;MAC7C,IAAI,CAACM,IAAI,GAAG,MAAM;IACpB,CAAC,MAAM;MACL,IAAI,CAACH,GAAG,GAAG,YAAY;MACvB,IAAI,CAACC,OAAO,GAAGJ,UAAU,CAAC,KAAK,CAAC;MAChC,IAAI,CAACK,eAAe,GAAGL,UAAU,CAAC,UAAU,CAAC;MAC7C,IAAI,CAACM,IAAI,GAAG,aAAa;IAC3B;EACF;AA0CF;AACA,OAAO,MAAMoB,SAAS,GAAG,IAAIzB,IAAI,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}